(this.webpackJsonpbattleship=this.webpackJsonpbattleship||[]).push([[0],{15:function(t,e,n){},16:function(t,e,n){"use strict";n.r(e);var a=n(0),r=n.n(a),i=n(8),c=n.n(i),o=n(1),u=function(){return Object(o.jsx)("div",{id:"header",children:Object(o.jsxs)("div",{id:"headerContainer",children:[Object(o.jsx)("span",{className:"material-icons",children:"directions_boat_filled"}),Object(o.jsx)("div",{id:"headerTitle",children:"Battleship!"})]})})},s=n(3),d=n(2),h=n(4),f=n.n(h),l=function(t){var e=t.gameStart,n=t.player,r=t.coord,i=t.winner,c=Object(a.useState)("empty"),u=Object(d.a)(c,2),s=u[0],h=u[1];return Object(a.useEffect)((function(){t.shipTileStatus[0]&&(t.shipTileStatus[0].miss?h("miss"):h(t.shipTileStatus[0].hit?"shipHit":"hasShip"))}),[t.shipTileStatus]),Object(o.jsx)("div",{className:"gameBoardTile ".concat(s),onClick:i?null:function(){e&&"computer"===n&&!i&&t.receiveAttack(r)},onDragOver:t.onDragOver,onDrop:t.onDrop,"data-coord-x":t.coord.x,"data-coord-y":t.coord.y})},j=function(t){var e=t.shipSize,n=t.player,r=t.id,i=Object(a.useState)([]),c=Object(d.a)(i,2),u=c[0],s=c[1],h=Object(a.useState)(!1),l=Object(d.a)(h,2),j=l[0],b=l[1];return Object(a.useEffect)((function(){!function(){for(var t=[],n=1;n<=e;n++)t.push(Object(o.jsx)("div",{className:"shipUnit","data-unit":n},f()()));s(t)}()}),[]),Object(o.jsx)("div",{className:"ship ".concat(t.isSunk?"sunk":""),draggable:t.draggable,onClick:function(t){return function(t){t.target.parentNode.style.transform=j||"human"!==n?"":"rotate(90deg)",b(!j)}(t)},onDragStart:function(t){return function(t){var n=0;if(j){var a=t.target.getBoundingClientRect().width/e,i=(t.clientX-t.target.getBoundingClientRect().left)/a;n=Math.ceil(i)}else{var c=t.target.getBoundingClientRect().height/e,o=(t.clientY-t.target.getBoundingClientRect().top)/c;n=Math.ceil(o)}var u={shipSize:e,orientation:j?"horizontal":"vertical",shipUnitIndex:n,id:r};t.dataTransfer.setData("shipData",JSON.stringify(u))}(t)},id:r,children:u})},b=function(t){var e=t.boardSize,n=t.player,r=t.shipSizeArray,i=t.shipOnBoard,c=t.gameStart,u=t.shipCoordsArray,h=t.boardAttackCoords,b=t.shipSunk,p=t.winner,O=t.currPlayerTurn,m=Object(a.useState)([]),S=Object(d.a)(m,2),g=S[0],v=S[1],x=Object(a.useState)([]),y=Object(d.a)(x,2),C=y[0],k=y[1],A=function(){var e;e=r.map((function(e){var a=f()();return"computer"===n&&t.addShipOnBoard(n,a),Object(o.jsx)(j,{shipSize:e,player:n,id:a,draggable:-1===i.indexOf(a)&&"human"===n?"true":"false",isSunk:B(a)},f()())})),k(e)},B=function(t){return-1!==b.indexOf(t)},M=function(e,a,r){for(var i=[],c={},o=!0,u=Math.floor(Math.random()*a)+1,s=Math.floor(2*Math.random())?"horizontal":"vertical",d=Math.floor(10*Math.random()),h=Math.floor(10*Math.random()),f=1;f<=a;f++){c={x:"vertical"===s?d:d-(u-f),y:"horizontal"===s?h:h-(u-f),ship:e,hit:!1},i.push(c)}return i.forEach((function(t){(t.x<0||t.x>9||t.y<0||t.y>9)&&(o=!1);for(var e=0;e<r.length;e++)if(r[e].filter((function(e){return e.x===t.x&&e.y===t.y})).length>0)return void(o=!1)})),o&&(r.push(i),t.addShipCoordsArray(n,i)),o},N=function(e){var a={x:e.target.getAttribute("data-coord-x"),y:e.target.getAttribute("data-coord-y")};e.preventDefault(),function(e,a){var r=[],c={},o=!0,s=e.orientation,d=e.shipUnitIndex,h=e.shipSize,f=e.id;if(-1===i.indexOf(f)&&"computer"!==n){for(var l=1;l<=h;l++)c={x:"vertical"===s?Number(a.x):Number(a.x)-(d-l),y:"horizontal"===s?Number(a.y):Number(a.y)-(d-l),ship:f,hit:!1},r.push(c);r.forEach((function(t){(t.x<0||t.x>9||t.y<0||t.y>9)&&(o=!1);for(var e=0;e<u.length;e++)if(u[e].filter((function(e){return e.x===t.x&&e.y===t.y})).length>0)return void(o=!1)})),o&&(t.addShipCoordsArray(n,r),t.addShipOnBoard(n,f))}}(JSON.parse(e.dataTransfer.getData("shipData")),a)},T=function(t){t.preventDefault()},z=function(t){for(var e="",n=0;n<u.length;n++)if((e=u[n].filter((function(e){return e.x===t.j&&e.y===t.i}))).length>0)return e;for(var a=0;a<h.length;a++)if((e=h.filter((function(e){return e.x===t.j&&e.y===t.i}))).length>0)return e[0].miss=!0,e;return e},E=function(){for(var t=[],a=0;a<e;a++)for(var r=0;r<e;r++)t.push(Object(o.jsx)(l,{coord:{x:r,y:a},player:n,onDragOver:function(t){return T(t)},onDrop:function(t){return N(t)},shipTileStatus:z({j:r,i:a}),gameStart:c,receiveAttack:D,winner:p},f()()));v(t)},D=function(e){for(var a="",r=0;r<h.length;r++)if((a=h.filter((function(t){return t.x===e.x&&t.y===e.y}))).length>0)return a;t.addBoardAttackCoords(n,e)};return Object(a.useEffect)((function(){"human"===n&&"computer"===O&&!p&&c&&function(){var t="";do{var e=Math.floor(10*Math.random()),n=Math.floor(10*Math.random());t=D({x:e,y:n})}while(t)}()}),[O]),Object(a.useEffect)((function(){c?(!function(){var t;t=r.map((function(t,e){return Object(o.jsx)(j,{shipSize:t,player:n,id:i[e],draggable:-1===i.indexOf(i[e])&&"human"===n?"true":"false",isSunk:B(i[e])},f()())})),k(t)}(),t.checkWin(n)):A()}),[b]),Object(a.useEffect)((function(){c&&(!function(){for(var e=Object(s.a)(u),a=h[h.length-1],r=0;r<e.length;r++){var i=e[r].findIndex((function(t){return t.x===a.x&&t.y===a.y}));-1!==i&&(e[r][i].hit=!0,t.checkSink(n,e[r][i].ship))}t.updateShipCoordsArray(n,e)}(),t.updateTurn())}),[h]),Object(a.useEffect)((function(){E()}),[u]),Object(a.useEffect)((function(){c&&"computer"===n&&function(){for(var t=[],e=0;e<i.length;e++){var n=!0;do{n=M(i[e],r[e],t)}while(!n)}}()}),[c]),Object(a.useEffect)((function(){E(),A()}),[]),Object(o.jsxs)("div",{className:"gameBoardWrapper",children:[Object(o.jsxs)("div",{className:"gameBoardTitle",children:[n.charAt(0).toUpperCase()+n.slice(1),"'s Board"]}),Object(o.jsx)("div",{className:"gameBoardContainer",id:"".concat(n,"GameBoard"),children:g}),Object(o.jsx)("div",{className:"shipContainer",children:C})]})},p=function(){var t=Object(a.useState)(10),e=Object(d.a)(t,2),n=e[0],r=(e[1],Object(a.useState)([5,4,3,3,2])),i=Object(d.a)(r,2),c=i[0],u=(i[1],Object(a.useState)([])),h=Object(d.a)(u,2),f=h[0],l=h[1],j=Object(a.useState)([]),p=Object(d.a)(j,2),O=p[0],m=p[1],S=Object(a.useState)([]),g=Object(d.a)(S,2),v=g[0],x=g[1],y=Object(a.useState)([]),C=Object(d.a)(y,2),k=C[0],A=C[1],B=Object(a.useState)([]),M=Object(d.a)(B,2),N=M[0],T=M[1],z=Object(a.useState)([]),E=Object(d.a)(z,2),D=E[0],w=E[1],P=Object(a.useState)([]),U=Object(d.a)(P,2),W=U[0],I=U[1],J=Object(a.useState)([]),R=Object(d.a)(J,2),G=R[0],_=R[1],H=Object(a.useState)(!1),X=Object(d.a)(H,2),Y=X[0],q=X[1],F=Object(a.useState)("human"),K=Object(d.a)(F,2),L=K[0],Q=K[1],V=Object(a.useState)("Place Ships"),Z=Object(d.a)(V,2),$=Z[0],tt=Z[1],et=Object(a.useState)(),nt=Object(d.a)(et,2),at=nt[0],rt=nt[1],it=Object(a.useState)(),ct=Object(d.a)(it,2),ot=ct[0],ut=ct[1];Object(a.useEffect)((function(){ot&&st()}),[ot]);var st=function(){l([]),m([]),x([]),A([]),T([]),w([]),I([]),_([]),q(!1),Q("human"),ut()},dt=function(){Q("human"===L?"computer":"human")},ht=function(t){("human"===t?W:G).length>=c.length&&ut("human"===t?"computer":"human")},ft=function(t,e){for(var n=0;n<("human"===t?O:k).length;n++){var a=("human"===t?O:k)[n].filter((function(t){return t.ship===e}));if(a.length>0){var r=function(){var n=a.length,r=0;return a.forEach((function(t){!0===t.hit&&r++})),r===n&&("human"===t?I([].concat(Object(s.a)(W),[e])):_([].concat(Object(s.a)(G),[e]))),{v:void 0}}();if("object"===typeof r)return r.v}}},lt=function(t,e){"human"===t?T((function(t){return[].concat(Object(s.a)(t),[e])})):w((function(t){return[].concat(Object(s.a)(t),[e])}))},jt=function(t,e){"human"===t?m(e):A(e)},bt=function(t,e){"human"===t?m((function(t){return[].concat(Object(s.a)(t),[e])})):A((function(t){return[].concat(Object(s.a)(t),[e])}))},pt=function(t,e){"human"===t?l((function(t){return[].concat(Object(s.a)(t),[e])})):x((function(t){return[].concat(Object(s.a)(t),[e])}))};return Object(a.useEffect)((function(){Y&&ot?rt("".concat(ot.charAt(0).toUpperCase()+ot.slice(1)," wins!")):Y?(tt("Attack!"),rt()):tt("Place Ships")}),[Y,ot]),Object(o.jsxs)("div",{id:"gameContainer",children:[Object(o.jsx)(b,{boardSize:n,player:"human",shipSizeArray:c,addShipOnBoard:pt,shipOnBoard:f,gameStart:Y,addShipCoordsArray:bt,shipCoordsArray:O,boardAttackCoords:N,addBoardAttackCoords:lt,updateShipCoordsArray:jt,shipSunk:W,checkSink:ft,checkWin:ht,currPlayerTurn:L,updateTurn:dt,winner:ot}),Object(o.jsxs)("div",{id:"gameStatusContainer",children:[Object(o.jsx)("div",{id:"gameWinMessage",children:at}),Object(o.jsx)("div",{id:"statusMessage",children:$}),Object(o.jsx)("button",{className:"btnStartGame",onClick:function(){q(!0)},disabled:!(f.length===c.length&&!Y),children:"Start Game"})]}),Object(o.jsx)(b,{boardSize:n,player:"computer",shipSizeArray:c,addShipOnBoard:pt,shipOnBoard:v,gameStart:Y,addShipCoordsArray:bt,shipCoordsArray:k,boardAttackCoords:D,addBoardAttackCoords:lt,updateShipCoordsArray:jt,shipSunk:G,checkSink:ft,checkWin:ht,currPlayerTurn:L,updateTurn:dt,winner:ot})]})},O=(n(15),function(){return Object(o.jsxs)("div",{id:"appContainer",children:[Object(o.jsx)(u,{}),Object(o.jsx)(p,{})]})});c.a.render(Object(o.jsx)(r.a.StrictMode,{children:Object(o.jsx)(O,{})}),document.getElementById("root"))}},[[16,1,2]]]);
//# sourceMappingURL=main.7481c333.chunk.js.map